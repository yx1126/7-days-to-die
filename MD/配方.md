# 配方

`Mods` 根目录下创建 `recipes.xml`

```xml
<configs>
    ...
</configs>
```

## `xml` 标签

| name            | desc     |
| --------------- | -------- |
| append          | 新增     |
| set             | 设置     |
| setattribute    | 设置属性 |
| remove          | 删除     |
| removeattribute | 删除属性 |
| csv             | 修改属性 |

### `xpath` 支持 `*` 通配符

> Example

```xml
<remove xpath="/recipes/recipe[@name='resourceConcreteMix']/*" />
```

### `xpath` 支持 `starts-with` 函数

### `csv` 标签

> Example 新增

```xml
<csv xpath="/recipes/recipe[@name='resourceConcreteMix']/@tags" op="Add">learnable</csv>
```

> Example 删除

```xml
<csv xpath="/recipes/recipe[@name='resourceConcreteMix']/@tags" op="Add">learnable</csv>
```

````

> Example

```xml
<remove xpath="/recipes/recipe[starts-with(@name, 'resource')]/*" />
````

1. 新增标签 `append`

    > Example 新增制作配方

    ```xml
    <!-- 3瓶酸液 由 一个汽车电池制作 -->
    <append xpath="/recipes">
        <recipes name="resourceAcid" count="3">
            <ingredient name="carBattery" count="1" />
        </recipes>
    </append>
    ```

    > Example 配方新增材料

    ```xml
    <!-- xpath 属性选择使用 @ 符号 -->
    <append xpath="/recipes/recipe[@name='sectionalLeatherCouchSofaBlockVariantHelper']">
         <ingredient name="resourceForgedIron" count="10" />
    </append>
    ```

2. 删除标签 `remove`

    > Example 删除配方

    ```xml
    <remove xpath="/recipes/recipe[@name='resourceConcreteMix']/ingredient[@name='resourceCrushedSand']" />
    ```

3. 删除属性 `removeattribute`

    > Example 移除工作台制作限制

    ```xml
     <removeattribute xpath="/recipes/recipe[@name='resourceHubcap']/@craft_area" />
    ```

4. 添加属性

    > Example 酸液只能在工作台制作 `craft_area="workbench"`
    >
    > | name           | desc         | remark                             | value   |
    > | -------------- | ------------ | ---------------------------------- | ------- |
    > | craft_area     | 工作区域     |                                    | `,`分割 |
    > | craft_tool     | 工作区域条件 |                                    | `,`分割 |
    > | craft_time     | 工作时常     | 60 相当于游戏内 1 分钟             |         |
    > | tags           | 制作类型     |                                    | `,`分割 |
    > | material_based | 制作类型     | 锻造炉 专有属性 需要烧材料才能制作 | true    |
    >
    > | name       | craft_area       |
    > | ---------- | ---------------- |
    > | 工作台     | workbench        |
    > | 篝火       | campfire         |
    > | 锻造炉     | forge            |
    > | 化学工作台 | chemistryStation |
    >
    > | tags                    | tags                          |
    > | ----------------------- | ----------------------------- |
    > | workbenchCrafting       | 支持 智慧里的`高级工程师`技能 |
    > | perkAdvancedEngineering | 影响物品的制作成本            |
    > | chemStationCrafting     | 支持 智慧里的`医师`技能       |

    ```xml
     <append xpath="/recipes">
       <recipes name="resourceAcid" count="3" craft_area="workbench">
           <ingredient name="carBattery" count="1" />
       </recipes>
     </append>
    ```

    > Example 通过 `setattribute` 设置 在没有 `craft_area` 属性的 `xml` 标签上添加
    >
    > 注意 `not`关键字

    ```xml
    <setattribute xpath="/recipes/recipe[@name='resourceGunPowder' and not(@craft_area)]" name="craft_area">campfire</setattribute>
    ```

    > Example 通过 `craft_tool` 属性 设置 篝火需要烧杯 `craft_tool="toolBeaker"` 才能制作火药
    >
    > 注意执行顺序 从上到下

    ```xml
    <setattribute xpath="/recipes/recipe[@name='resourceGunPowder' and @craft_area='campfire']" name="craft_tool">toolBeaker</setattribute>

    ```

    > Example 通过锻造炉制作太阳能电池 `craft_tool="toolBeaker"` 才能制作火药
    >
    > `material_based="true"` 目前锻造炉专有属性(是消耗锻造炉烧的材料制作) 必加

    ```xml
    <recipe name="solarCell" count="1" material_based="true" craft_area="forge" craft_tool="toolForgeCrucoble" craft_time="3">
        <ingredient name="unit_glass" count="200" />
        <ingredient name="unit_lead" count="500" />
        <ingredient name="unit_iron" count="100" />
        <ingredient name="unit_clay" count="50" />
    </recipe>

    ```

5. `effect_group`

    > Example

    ```xml
    <!-- resourceElectricParts：电子零件 -->
    <recipe name="resourceElectricParts" count="1" craft_area="workbench" tags="workbenchCrafting,perkAdvancedEngineering">
        <!-- 锻铁 -->
        <ingredient name="resourceForgedIron" count="2" />
        <!-- 废合物 -->
        <ingredient name="resourceScrapPolymers" count="2" />
        <!-- 酸液 -->
        <ingredient name="resourceAcid" count="1" />
        <effect_group>
            <!--
                level: 高级工程师[0,1,2,3,4]  厨师 [1,2,3] 不一定写全
                value: 数值 .56/-1/+1
                operation：高级工程师[perc_add] 厨师[base_add]  `buffs.xml 最下方查看值`
                tags 合成材料 ,分割
            -->
            <passive_effect name="CraftingIngredientCount" level="0,1,2,3,4" operation="perc_add" value=".56,.56,.56,.34,.15" tags="resourceForgedIron,resourceScrapPolymers" />
        </effect_group>
    </recipe>

    ```
