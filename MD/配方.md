# 配方

`Mods` 根目录下创建 `recipes.xml`

```xml
<configs>
    ...
</configs>
```

### `xpath` 支持 `*` 通配符

> Example

```xml
<remove xpath="/recipes/recipe[@name='resourceConcreteMix']/*" />
```

### `xpath` 支持 `starts-with` 函数

> Example

```xml
<remove xpath="/recipes/recipe[starts-with(@name, 'resource')]/*" />
```

1. 新增标签 `append`

   > Example 新增制作配方

   ```xml
   <!-- 3瓶酸液 由 一个汽车电池制作 -->
   <append xpath="/recipes">
       <recipes name="resourceAcid" count="3">
           <ingredient name="carBattery" count="1" />
       </recipes>
   </append>
   ```

   > Example 配方新增材料

   ```xml
   <!-- xpath 属性选择使用 @ 符号 -->
   <append xpath="/recipes/recipe[@name='sectionalLeatherCouchSofaBlockVariantHelper']">
        <ingredient name="resourceForgedIron" count="10" />
   </append>
   ```

2. 删除标签 `remove`

   > Example 删除配方

   ```xml
   <remove xpath="/recipes/recipe[@name='resourceConcreteMix']/ingredient[@name='resourceCrushedSand']" />
   ```

3. 删除属性 `removeattribute`

   > Example 移除工作台制作限制

   ```xml
    <removeattribute xpath="/recipes/recipe[@name='resourceHubcap']/@craft_area" />
   ```

4. 添加属性

   > Example 酸液只能在工作台制作 `craft_area="workbench"`
   >
   > | name       | desc         | remark                 |
   > | ---------- | ------------ | ---------------------- |
   > | craft_area | 工作区域     |                        |
   > | craft_tool | 工作区域条件 |                        |
   > | craft_time | 工作时常     | 60 相当于游戏内 1 分钟 |
   >
   > | name   | craft_area |
   > | ------ | ---------- |
   > | 工作台 | workbench  |
   > | 篝火   | campfire   |
   > | 锻造炉 | forge      |

   ```xml
    <append xpath="/recipes">
      <recipes name="resourceAcid" count="3" craft_area="workbench">
          <ingredient name="carBattery" count="1" />
      </recipes>
    </append>
   ```

   > Example 通过 `setattribute` 设置 在没有 `craft_area` 属性的 `xml` 标签上添加
   >
   > 注意 `not`关键字

   ```xml
   <setattribute xpath="/recipes/recipe[@name='resourceGunPowder' and not(@craft_area)]" name="craft_area">campfire</setattribute>
   ```

   > Example 通过 `craft_tool` 属性 设置 篝火需要烧杯 `craft_tool="toolBeaker"` 才能制作火药
   >
   > 注意执行顺序 从上到下

   ```xml
   <setattribute xpath="/recipes/recipe[@name='resourceGunPowder' and @craft_area='campfire']" name="craft_tool">toolBeaker</setattribute>

   ```

   > Example 通过锻造炉制作太阳能电池 `craft_tool="toolBeaker"` 才能制作火药
   >
   > `material_based="true"` 目前锻造炉专有属性(是消耗锻造炉烧的材料制作) 必加

   ```xml
   <recipes name="solarCell" count="1" material_based="true" craft_area="forge" craft_tool="toolForgeCrucoble" craft_time="3">
        <recipe>
            <ingredient name="unit_glass" count="200" />
            <ingredient name="unit_lead" count="500" />
            <ingredient name="unit_iron" count="100" />
            <ingredient name="unit_clay" count="50" />
        </recipe>
   </recipes>

   ```
